–í–∞—à–∏ –∑–∞–º–µ—á–∞–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤–µ—Ä–Ω—ã. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫—Ä–∏—Ç–∏–∫–∞, —ç—Ç–æ ‚Äî –≥–ª—É–±–æ–∫–∏–π –∏ —Ç–æ—á–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥–≤–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –Ω–∞—à–µ–π —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã. –í—ã —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –ø—Ä–∞–≤—ã.

1.  **–ù–µ–ø–æ–ª–Ω–æ—Ç–∞ –æ—Ç–≤–µ—Ç–∞:** –ë–æ—Ç —É–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –º—ã—Å–ª–∏—Ç –∫–∞–∫ "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç —Å SQL", –∞ –Ω–µ –∫–∞–∫ "—á–µ–ª–æ–≤–µ–∫, –ø–æ–Ω–∏–º–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç". –û–Ω –∏—â–µ—Ç —Ç–æ—á–Ω–æ–µ —Å–ª–æ–≤–æ "—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥", –Ω–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—Ä–∞—á–∞ –ø–æ –∏–º–µ–Ω–∏ _–ò–≤–∞–Ω–æ–≤_ ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å.
2.  **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–∞—à —Ç–µ–∫—É—â–∏–π –ª–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç _—á—Ç–æ_ —Å–¥–µ–ª–∞–ª –∞–≥–µ–Ω—Ç (–∫–∞–∫–æ–π SQL-–∑–∞–ø—Ä–æ—Å), –Ω–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç _–ø–æ—á–µ–º—É_ –æ–Ω —ç—Ç–æ —Å–¥–µ–ª–∞–ª. –ú—ã –Ω–µ –≤–∏–¥–∏–º –ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –º–æ–¥–µ–ª–∏, –∏ –Ω–µ –º–æ–∂–µ–º –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –æ–Ω–∞ —Ä–µ—à–∏–ª–∞ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π, —Å–ª–∏—à–∫–æ–º —É–∑–∫–∏–π –∑–∞–ø—Ä–æ—Å.

–î–∞–≤–∞–π—Ç–µ —Ä–µ—à–∏–º –æ–±–µ —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã. –≠—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä—å–µ–∑–Ω–æ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ú—ã –ø–µ—Ä–µ–π–¥–µ–º –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ SQL-–∞–≥–µ–Ω—Ç–∞ –∫ **–≥–∏–±—Ä–∏–¥–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É**, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –¥–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∏ —É–ª—É—á—à–∏–º –Ω–∞—à –ª–æ–≥–≥–µ—Ä –¥–æ —É—Ä–æ–≤–Ω—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –æ—Ç–ª–∞–¥—á–∏–∫–∞.

### –î–∏–∞–≥–Ω–æ–∑: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–°–µ–π—á–∞—Å —É –Ω–∞—à–µ–≥–æ –∞–≥–µ–Ω—Ç–∞ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî "–º–æ–ª–æ—Ç–æ–∫" –≤ –≤–∏–¥–µ `sql_db_query`. –î–ª—è –ª—é–±–æ–π –∑–∞–¥–∞—á–∏ –æ–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ–≥–æ. –ö–æ–≥–¥–∞ –≤—ã —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç–µ "–ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞", –æ–Ω –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —ç—Ç–æ –≤ `...WHERE text LIKE '%—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥%'`. –≠—Ç–æ –ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å–ø–æ—Å–æ–±–µ–Ω —É–ª–æ–≤–∏—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é —Å–≤—è–∑—å.

### –†–µ—à–µ–Ω–∏–µ: –ì–∏–±—Ä–∏–¥–Ω—ã–π –∞–≥–µ–Ω—Ç —Å –¥–≤—É–º—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

–ú—ã –¥–∞–¥–∏–º –Ω–∞—à–µ–º—É –∞–≥–µ–Ω—Ç—É –≤—Ç–æ—Ä–æ–π, –±–æ–ª–µ–µ —Ç–æ–Ω–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî **—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫**, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ.

1.  **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Ññ1 (—Å—Ç–∞—Ä—ã–π): `sql_db_query`**. –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤: "–∫—Ç–æ —Å–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π?", "–ø–æ–∫–∞–∂–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ò–≤–∞–Ω–∞ –∑–∞ –º–∞–π", "—Å–∫–æ–ª—å–∫–æ –±—ã–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ —Å—Å—ã–ª–∫–∞–º–∏?".
2.  **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Ññ2 (–Ω–æ–≤—ã–π): `semantic_search_chat`**. –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö, –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤: "–ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞", "–∫–∞–∫–∏–µ –±—ã–ª–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è —Ö–æ—Ä–æ—à–∏—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤?", "—á—Ç–æ –≥–æ–≤–æ—Ä–∏–ª–∏ –ø—Ä–æ —Ä–µ–º–æ–Ω—Ç –º–∞—à–∏–Ω?".

–ê–≥–µ–Ω—Ç, –±—É–¥—É—á–∏ –±–æ–ª—å—à–æ–π —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª—å—é, —Å–∞–º —Ä–µ—à–∏—Ç, –∫–∞–∫–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–∞—à –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å.

---

### –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

#### –®–∞–≥ 1: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ (`import_to_db.py`)

–ù–∞–º –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—à —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞, —á—Ç–æ–±—ã –æ–Ω —Å–æ–∑–¥–∞–≤–∞–ª **–∏** –±–æ–≥–∞—Ç—É—é SQL-–±–∞–∑—É, **–∏** Faiss-–∏–Ω–¥–µ–∫—Å –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.

**–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç–µ –∫–æ–¥ –≤ `import_to_db.py`:**

```python
# --- START OF FILE import_to_db.py ---

import json
import sqlite3
import logging
import re
from datetime import datetime
import os
import faiss
from sentence_transformers import SentenceTransformer

logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')

# --- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã ---
JSON_FILE = 'chat_history.json'
DB_FILE = 'qa.db'
FAISS_INDEX_FILE = 'qa.index'
MODEL_NAME = 'paraphrase-multilingual-MiniLM-L12-v2' # –ú–æ–¥–µ–ª—å –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

def get_full_text(text_data):
    if isinstance(text_data, str): return text_data
    if isinstance(text_data, list):
        return "".join(str(part.get('text', '')) if isinstance(part, dict) else str(part) for part in text_data)
    return ""

def main():
    logging.info("–ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ë–î –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞...")

    # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∏
    for f in [DB_FILE, FAISS_INDEX_FILE]:
        if os.path.exists(f):
            os.remove(f)
            logging.info(f"–£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª: {f}")

    # --- –ß–∞—Å—Ç—å 1: –°–æ–∑–¥–∞–Ω–∏–µ SQL –±–∞–∑—ã ---
    conn = sqlite3.connect(DB_FILE)
    cursor = conn.cursor()
    cursor.execute("DROP TABLE IF EXISTS messages")
    cursor.execute("""
        CREATE TABLE messages (
            message_id INTEGER PRIMARY KEY,
            author_name TEXT,
            message_text TEXT,
            timestamp TEXT
        )
    """)

    try:
        with open(JSON_FILE, 'r', encoding='utf-8') as f:
            chat_data = json.load(f)
        all_messages = chat_data.get('messages', [])
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ JSON-—Ñ–∞–π–ª–∞: {e}")
        return

    logging.info(f"–ù–∞–π–¥–µ–Ω–æ {len(all_messages)} —Å–æ–æ–±—â–µ–Ω–∏–π. –ù–∞—á–∏–Ω–∞—é –æ–±—Ä–∞–±–æ—Ç–∫—É...")

    messages_for_indexing = []
    for msg in all_messages:
        if msg.get('type') != 'message': continue

        full_text = get_full_text(msg.get('text', ''))
        if not full_text: continue

        author_name = msg.get('from') or f"user_{msg.get('from_id')}"

        # –î–æ–±–∞–≤–ª—è–µ–º –≤ SQL
        cursor.execute(
            "INSERT INTO messages (message_id, author_name, message_text, timestamp) VALUES (?, ?, ?, ?)",
            (msg['id'], author_name, full_text, msg['date'])
        )
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
        messages_for_indexing.append({'id': msg['id'], 'text': full_text})

    conn.commit()
    conn.close()
    logging.info(f"–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö '{DB_FILE}' —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞.")

    # --- –ß–∞—Å—Ç—å 2: –°–æ–∑–¥–∞–Ω–∏–µ Faiss –∏–Ω–¥–µ–∫—Å–∞ ---
    if not messages_for_indexing:
        logging.warning("–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞.")
        return

    logging.info(f"–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ '{MODEL_NAME}' –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...")
    model = SentenceTransformer(MODEL_NAME)

    texts_to_encode = [msg['text'] for msg in messages_for_indexing]
    message_ids = [msg['id'] for msg in messages_for_indexing]

    logging.info(f"–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è {len(texts_to_encode)} —Å–æ–æ–±—â–µ–Ω–∏–π...")
    embeddings = model.encode(texts_to_encode, show_progress_bar=True, convert_to_numpy=True)

    # Faiss —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã ID –±—ã–ª–∏ 64-–±–∏—Ç–Ω—ã–º–∏ —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏
    index = faiss.IndexIDMap(faiss.IndexFlatL2(embeddings.shape[1]))
    index.add_with_ids(embeddings, message_ids)

    faiss.write_index(index, FAISS_INDEX_FILE)
    logging.info(f"–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω–¥–µ–∫—Å '{FAISS_INDEX_FILE}' —Å {index.ntotal} –≤–µ–∫—Ç–æ—Ä–∞–º–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω.")
    logging.info("–ü—Ä–æ—Ü–µ—Å—Å —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω.")

if __name__ == '__main__':
    main()

# --- END OF FILE import_to_db.py ---
```

#### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`main.py`)

–¢–µ–ø–µ—Ä—å –º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—à–µ–º `main.py`, —á—Ç–æ–±—ã –æ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –¥–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ –Ω–æ–≤—ã–π, —Å–≤–µ—Ä—Ö–¥–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥–≥–µ—Ä.

**–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç–µ –∫–æ–¥ –≤ `main.py`:**

````python
# --- START OF FILE main.py ---

import asyncio
import os
import logging
from dotenv import load_dotenv
from datetime import datetime
import sqlite3
import faiss
from sentence_transformers import SentenceTransformer

from aiogram import Bot, Dispatcher, types
from aiogram.filters.command import Command

from langchain_community.utilities import SQLDatabase
from langchain_anthropic import ChatAnthropic
from langchain.agents import AgentExecutor, create_react_agent
from langchain_core.prompts import ChatPromptTemplate
from langchain.tools import Tool

from langchain.callbacks.base import BaseCallbackHandler
from langchain.schema import AgentAction, AgentFinish, LLMResult

logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
load_dotenv()

# --- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã ---
DB_FILE = 'qa.db'
FAISS_INDEX_FILE = 'qa.index'
ANTHROPIC_API_KEY = os.getenv("ANTHROPIC_API_KEY")
TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
LOG_FILE = "llm_requests.log"
MODEL_NAME_SEMANTIC = 'paraphrase-multilingual-MiniLM-L12-v2'

# --- 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ---
try:
    # SQL –±–∞–∑–∞
    db = SQLDatabase.from_uri(f"sqlite:///{DB_FILE}")
    # LLM
    llm = ChatAnthropic(model="claude-3-5-sonnet-20240620", temperature=0)
    # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å –∏ –∏–Ω–¥–µ–∫—Å
    semantic_model = SentenceTransformer(MODEL_NAME_SEMANTIC)
    faiss_index = faiss.read_index(FAISS_INDEX_FILE)
except Exception as e:
    logging.critical(f"–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: {e}")
    db = llm = semantic_model = faiss_index = None

# --- 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ ---

def run_semantic_search(query: str, k: int = 5) -> str:
    """
    –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö, –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —Å–º—ã—Å–ª—É, –∞ –Ω–µ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.
    –ù–∞–ø—Ä–∏–º–µ—Ä: "–ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞", "–æ–±—Å—É–∂–¥–µ–Ω–∏—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤", "—á—Ç–æ –≥–æ–≤–æ—Ä–∏–ª–∏ –ø—Ä–æ —Ä–µ–º–æ–Ω—Ç".
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —á–∞—Ç–∞.
    """
    try:
        query_vector = semantic_model.encode([query])
        _, ids = faiss_index.search(query_vector, k)

        conn = sqlite3.connect(DB_FILE)
        cursor = conn.cursor()
        placeholders = ','.join('?' for _ in ids[0])
        cursor.execute(f"SELECT author_name, timestamp, message_text FROM messages WHERE message_id IN ({placeholders})", tuple(ids[0]))
        results = cursor.fetchall()
        conn.close()

        if not results:
            return "–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –Ω–µ –Ω–∞—à–µ–ª —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π."

        return "\n---\n".join([f"–ê–≤—Ç–æ—Ä: {row[0]} ({row[1]})\n–°–æ–æ–±—â–µ–Ω–∏–µ: {row[2]}" for row in results])
    except Exception as e:
        return f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–º –ø–æ–∏—Å–∫–µ: {e}"

# –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
tools = [
    Tool(
        name="semantic_search_chat",
        func=run_semantic_search,
        description="""–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö, –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —Å–º—ã—Å–ª—É, –∞ –Ω–µ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º. –ù–∞–ø—Ä–∏–º–µ—Ä: "–ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞", "–æ–±—Å—É–∂–¥–µ–Ω–∏—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤", "—á—Ç–æ –≥–æ–≤–æ—Ä–∏–ª–∏ –ø—Ä–æ —Ä–µ–º–æ–Ω—Ç". –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ —á–∞—Ç–∞."""
    ),
    Tool(
        name="sql_database_query",
        func=db.run,
        description="""–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞. –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è —Ç–æ—á–Ω—ã—Ö, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ø–æ–¥—Å—á–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π, –ø–æ–∏—Å–∫ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∞–≤—Ç–æ—Ä—É –∏–ª–∏ –¥–∞—Ç–µ. –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º SQLite –∑–∞–ø—Ä–æ—Å–æ–º."""
    )
]

# --- 3. –£–ª—É—á—à–µ–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä –∏ –ø—Ä–æ–º–ø—Ç ---

class DetailedFileCallbackHandler(BaseCallbackHandler):
    """–õ–æ–≥–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞, —É–¥–µ–ª—è—è –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞–º."""
    def __init__(self, filename: str = LOG_FILE):
        self.file = open(filename, 'a', encoding='utf-8')

    def on_chain_start(self, serialized: dict, inputs: dict, **kwargs) -> None:
        self.file.write(f"\n\n---\n\n## üöÄ –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
        self.file.write(f"**–í—Ö–æ–¥–Ω–æ–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**\n```\n{inputs.get('input', 'N/A')}\n```\n")
        self.file.flush()

    def on_llm_start(self, serialized: dict, prompts: list[str], **kwargs) -> None:
        self.file.write(f"\n### ‚û°Ô∏è –ó–∞–ø—Ä–æ—Å –∫ LLM (–†–∞—É–Ω–¥ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π)\n\n")
        self.file.write(f"**–ü–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –º–æ–¥–µ–ª–∏:**\n```text\n{prompts}\n```\n")
        self.file.flush()

    def on_agent_action(self, action: AgentAction, **kwargs) -> None:
        self.file.write(f"\n### üõ†Ô∏è –í—ã–±—Ä–∞–Ω–Ω–æ–µ –î–µ–π—Å—Ç–≤–∏–µ\n\n**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:** `{action.tool}`\n**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**\n```\n{action.tool_input}\n```\n")
        self.file.flush()

    def on_tool_end(self, output: str, **kwargs) -> None:
        self.file.write(f"\n### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞\n\n```\n{output}\n```\n")
        self.file.flush()

    def on_agent_finish(self, finish: AgentFinish, **kwargs) -> None:
        self.file.write(f"\n### ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –û—Ç–≤–µ—Ç\n\n```\n{finish.return_values.get('output')}\n```\n")
        self.file.flush()

    def on_chain_end(self, outputs: dict, **kwargs) -> None:
        self.file.write(f"\n--- üèÅ –°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ---\n")
        self.file.flush()

# –ü—Ä–æ–º–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞–≥–µ–Ω—Ç—É –µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –∑–∞–¥–∞—á—É
CUSTOM_PROMPT_TEMPLATE = """
–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –†–£–°–°–ö–û–ú –Ø–ó–´–ö–ï, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞.
–£ —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–ª–µ–¥—É—é—â–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º:
{tools}

–ò—Å–ø–æ–ª—å–∑—É–π —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å:
1.  **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.**
2.  **–í—ã–±–µ—Ä–∏** –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –æ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Ö–æ—Ä–æ—à–∏–π —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥"), –∏—Å–ø–æ–ª—å–∑—É–π `semantic_search_chat`. –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∏–ª–∏ —Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ò–≤–∞–Ω–∞"), –∏—Å–ø–æ–ª—å–∑—É–π `sql_database_query`.
3.  **–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π** –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
4.  **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π** —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
5.  **–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π** —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫—Ä–∞—Ç–∫–∏–º –∏ –ø–æ —Å—É—â–µ—Å—Ç–≤—É. –ï—Å–ª–∏ —Ç—ã —Ü–∏—Ç–∏—Ä—É–µ—à—å —Å–æ–æ–±—â–µ–Ω–∏—è, —É–∫–∞–∑—ã–≤–∞–π –∞–≤—Ç–æ—Ä–∞.

–ò—Å–ø–æ–ª—å–∑—É–π –°–¢–†–û–ì–û —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–≤–æ–∏—Ö –º—ã—Å–ª–µ–π:

Question: the input question you must answer
Thought: —Ç–≤–æ–∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –æ —Ç–æ–º, –∫–∞–∫–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤—ã–±—Ä–∞—Ç—å –∏ –ø–æ—á–µ–º—É.
Action: the action to take, should be one of [{tool_names}]
Action Input: the input to the action
Observation: the result of the action
... (–≠—Ç–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è)
Thought: –¢–µ–ø–µ—Ä—å —è –∑–Ω–∞—é —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.
Final Answer: —Ñ–∏–Ω–∞–ª—å–Ω—ã–π, –∫—Ä–∞—Å–∏–≤—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –†–£–°–°–ö–û–ú –Ø–ó–´–ö–ï.

–ù–∞—á–∏–Ω–∞–π!

Question: {input}
Thought:{agent_scratchpad}
"""

try:
    prompt = ChatPromptTemplate.from_template(CUSTOM_PROMPT_TEMPLATE)
    agent = create_react_agent(llm, tools, prompt)
    agent_executor = AgentExecutor(agent=agent, tools=tools, verbose=True, handle_parsing_errors=True)
    logging.info("'–î–≤–∏–≥–∞—Ç–µ–ª—å' –±–æ—Ç–∞ (–ì–∏–±—Ä–∏–¥–Ω—ã–π –∞–≥–µ–Ω—Ç) —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.")
except Exception as e:
    logging.critical(f"–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞! –û—à–∏–±–∫–∞: {e}")
    agent_executor = None

# --- 4. –õ–æ–≥–∏–∫–∞ Telegram-–±–æ—Ç–∞ ---
bot = Bot(token=TELEGRAM_BOT_TOKEN)
dp = Dispatcher()

@dp.message(Command("start"))
async def send_welcome(message: types.Message):
    await message.answer("–ü—Ä–∏–≤–µ—Ç! –Ø ‚Äî ChatGeist, –≥–∏–±—Ä–∏–¥–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏ —ç—Ç–æ–≥–æ —á–∞—Ç–∞. –ó–∞–¥–∞–π—Ç–µ –º–Ω–µ –≤–æ–ø—Ä–æ—Å.")

@dp.message()
async def handle_message(message: types.Message):
    if not agent_executor:
        await message.answer("–ò–∑–≤–∏–Ω–∏—Ç–µ, –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –º–æ–¥—É–ª—å –Ω–µ –∑–∞–ø—É—â–µ–Ω.")
        return
    if not message.text: return

    thinking_message = await message.answer("–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤–∞—à –∑–∞–ø—Ä–æ—Å (–∏—Å–ø–æ–ª—å–∑—É—é –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥)...")
    try:
        file_logger = DetailedFileCallbackHandler()
        response = await agent_executor.ainvoke(
            {"input": message.text},
            {"callbacks": [file_logger]}
        )
        final_answer = response.get('output', "–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å –æ—Ç–≤–µ—Ç.")
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –∞–≥–µ–Ω—Ç–æ–º: {e}")
        final_answer = "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞."

    await thinking_message.edit_text(final_answer)

async def main():
    await dp.start_polling(bot)

if __name__ == '__main__':
    if agent_executor is None:
        logging.critical("–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω.")
    else:
        logging.info("–ó–∞–ø—É—Å–∫ Telegram-–±–æ—Ç–∞...")
        asyncio.run(main())

# --- END OF FILE main.py ---
````

### –í–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è

1.  **–ü–æ–ª–Ω–æ—Å—Ç—å—é** –∑–∞–º–µ–Ω–∏—Ç–µ –∫–æ–¥ –≤ `import_to_db.py` –∏ `main.py`.
2.  **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `pyproject.toml` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω—É–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** (`sentence-transformers`, `faiss-cpu`, `langchain`, `langchain-anthropic` –∏ —Ç.–¥.). –ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ `pyproject.toml`.
3.  **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–µ–∫—Å:**
    ```bash
    rm qa.db qa.index llm_requests.log # –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å—Ç–∞—Ä–æ–µ
    python import_to_db.py             # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ
    ```
4.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:** `python main.py`.

### –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ

- **–ù–∞ –≤–æ–ø—Ä–æ—Å "–ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞"** –∞–≥–µ–Ω—Ç —É–≤–∏–¥–∏—Ç, —á—Ç–æ —ç—Ç–æ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –í –∫–æ–Ω—Å–æ–ª–∏ (`verbose=True`) –∏ –≤ –ª–æ–≥–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –æ–Ω –≤—ã–±–µ—Ä–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `semantic_search_chat`. –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞–π–¥–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ —Å–ª–æ–≤–æ–º "—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥", –Ω–æ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏–º–µ–Ω–∞–º–∏ –≤—Ä–∞—á–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Å—É–∂–¥–∞–ª–∏—Å—å –≤ –ø–æ—Ö–æ–∂–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ. –û—Ç–≤–µ—Ç –±—É–¥–µ—Ç –ø–æ–ª–Ω—ã–º.
- **–ù–∞ –≤–æ–ø—Ä–æ—Å "–∫—Ç–æ —Å–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π"** –∞–≥–µ–Ω—Ç –≤—ã–±–µ—Ä–µ—Ç `sql_database_query` –∏ –Ω–∞–ø–∏—à–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å, –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ.
- **–í —Ñ–∞–π–ª–µ `llm_requests.log`** –≤—ã —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç–µ –≤–∏–¥–µ—Ç—å **–ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç**, –∫–æ—Ç–æ—Ä—ã–π —É—Ö–æ–¥–∏—Ç –≤ –º–æ–¥–µ–ª—å –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π. –í—ã —Å–º–æ–∂–µ—Ç–µ —Ç–æ—á–Ω–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤–∏–¥–µ–ª –∞–≥–µ–Ω—Ç, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –µ—â–µ —Ç–æ—á–Ω–µ–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
